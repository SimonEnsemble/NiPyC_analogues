log             log.NiPyC2_relax_sc211_meta_functionalized_C-3CH3 append
units           real
atom_style      full
boundary        p p p

pair_style      lj/cut 5.00 
bond_style      harmonic
angle_style     hybrid fourier cosine/periodic
dihedral_style  harmonic
improper_style  fourier

dielectric      1.0
special_bonds   lj/coul 0.0 0.0 1.0
pair_modify     tail yes mix arithmetic
box tilt        large
read_data       data.NiPyC2_relax_sc211_meta_functionalized_C-3CH3

#### Atom Groupings ####
group           1        id   188:204
group           1-1      id   188
group           1-2      id   189
group           1-3      id   190
group           1-4      id   191
group           1-5      id   192
group           1-6      id   193
group           1-7      id   194
group           1-8      id   195
group           1-9      id   196
group           1-10     id   197
group           1-11     id   198
group           1-12     id   199
group           1-13     id   200
group           1-14     id   201
group           1-15     id   202
group           1-16     id   203
group           1-17     id   204
group           fram     id   1:187
#### END Atom Groupings ####

dump            NiPyC2_relax_sc211_meta_functionalized_C-3CH3_xyzmov all xyz 20000 NiPyC2_relax_sc211_meta_functionalized_C-3CH3_mov.xyz
dump_modify     NiPyC2_relax_sc211_meta_functionalized_C-3CH3_xyzmov element Ni O N C H C C C H
min_style       cg
print           "MinStep,CellMinStep,AtomMinStep,FinalStep,Energy,EDiff" file NiPyC2_relax_sc211_meta_functionalized_C-3CH3.min.csv screen no
variable        min_eval   equal 1.00e-06
variable        prev_E     equal 50000.00
variable        iter       loop 100000
label           loop_min
min_style       cg
fix             1 all box/relax aniso 0.0 vmax 0.01
minimize        1.0e-15 1.0e-15 10000 100000
unfix           1
min_style       fire
variable        tempstp    equal $(step)
variable        CellMinStep equal ${tempstp}
minimize        1.0e-15 1.0e-15 10000 100000
variable        AtomMinStep equal ${tempstp}
variable        temppe     equal $(pe)
variable        min_E      equal abs(${prev_E}-${temppe})
print           "${iter},${CellMinStep},${AtomMinStep},${AtomMinStep},$(pe),${min_E}" append NiPyC2_relax_sc211_meta_functionalized_C-3CH3.min.csv screen no
if              "${min_E} < ${min_eval}" then "jump SELF break_min"
variable        prev_E     equal ${temppe}
next            iter
jump            SELF loop_min
label           break_min
undump          NiPyC2_relax_sc211_meta_functionalized_C-3CH3_xyzmov

# Dump last snapshot for restart
variable curr_lx equal lx
variable curr_ly equal ly
variable curr_lz equal lz
change_box all x final 0 ${curr_lx} y final 0 ${curr_ly} z final 0 ${curr_lz}

reset_timestep 0
dump            NiPyC2_relax_sc211_meta_functionalized_C-3CH3_restart all atom 1 NiPyC2_relax_sc211_meta_functionalized_C-3CH3_restart.lammpstrj
dump_modify     NiPyC2_relax_sc211_meta_functionalized_C-3CH3_restart scale no sort id
run 0
undump          NiPyC2_relax_sc211_meta_functionalized_C-3CH3_restart
